#!/usr/bin/env bash

# Set colors
ESC_SEQ="\x1b["
COL_RESET=$ESC_SEQ"39;49;00m"
COL_RED=$ESC_SEQ"31;01m"
COL_GREEN=$ESC_SEQ"32;01m"


if [ "$1"=="" ]; then
    echo usage: $0 new-herokuapp-name
fi

# Check if ./build exists
if [ ! -d "./build" ]; then
	echo "No build, building"
	npm run build
fi
echo "No build, building"
pushd ./build 
heroku apps:create $1
echo "<?php header( 'Location: /index.html' ) ;  ?>" > index.php
git add --all . 
popd

echo -e "${COL_GREEN}App's build initialised for heroku.${COL_RESET}"

exit 0

